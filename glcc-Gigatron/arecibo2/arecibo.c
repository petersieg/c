// found at: https://codegolf.stackexchange.com/questions/182924/output-the-arecibo-message
// converted into simple Gigatron art demo - changes (c) 2024 Peter Sieg CC-BY-SA

//#include <stdio.h>
//#include <iostream>
//using namespace std;
#include <gigatron/sys.h>
//#include <gigatron/console.h>

#define SIZE 237

void drawPixel(int x, int y, int color)
{
    screenMemory[y][x] = color;
}

void main()
{
    const unsigned char arecibo[SIZE] = {

 0x02,0xa8,0x00
,0x28,0x28,0x08
,0x88,0x89,0x64
,0xaa,0xaa,0x48
,0x00,0x00,0x00
,0x00,0x0c,0x00
,0x00,0x34,0x00
,0x00,0x34,0x00
,0x00,0x54,0x00
,0x00,0x7c,0x00
,0x00,0x00,0x00
,0xc3,0x8c,0x30
,0x80,0x03,0x20
,0xd1,0x8c,0x34
,0xfb,0xef,0xbe
,0x00,0x00,0x00
,0x10,0x00,0x04
,0x00,0x00,0x00
,0x08,0x00,0x02
,0xf8,0x00,0x3e
,0x00,0x00,0x00
,0xc3,0x0e,0x30
,0x80,0x80,0x20
,0xd0,0xc7,0x34
,0xfb,0xef,0xbe
,0x00,0x00,0x00
,0x10,0x30,0x04
,0x00,0x30,0x00
,0x08,0x30,0x02
,0xf8,0x30,0x3e
,0x00,0x30,0x00
,0x20,0x10,0x08
,0x10,0x30,0x10
,0x0c,0x30,0x20
,0x03,0x10,0xc0
,0x00,0x33,0x00
,0x03,0x10,0xc0
,0x0c,0x30,0x20
,0x10,0x20,0x10
,0x20,0x30,0x08
,0x40,0x30,0x08
,0x40,0x10,0x10
,0x20,0x20,0x20
,0x10,0x00,0xc0
,0x0c,0x03,0x00
,0x23,0xac,0x00
,0x20,0x20,0x00
,0x20,0xf8,0x00
,0x21,0x74,0xb6
,0x02,0x72,0x7e
,0xb8,0x70,0x6e
,0x00,0x50,0x76
,0x20,0x50,0x7e
,0x20,0x50,0x60
,0x20,0xd8,0x00
,0x00,0x00,0x00
,0x38,0x20,0x00
,0x3a,0x8a,0xaa
,0x38,0x02,0xa8
,0x00,0x02,0x80
,0x00,0xf8,0x00
,0x03,0xfe,0x00
,0x0e,0x03,0x80
,0x18,0x00,0xc0
,0x34,0x01,0x60
,0x66,0x03,0x30
,0x45,0x05,0x10
,0x44,0x89,0x10
,0x04,0x51,0x00
,0x04,0x21,0x00
,0x04,0x01,0x00
,0x01,0x28,0x00
,0x79,0xf4,0xf0 
};

    int d,i = 0,j,x = 0,xx,xpos,y = 0;

	//_console_setup();
    //_console_reset(0x3f00);
    _console_clear((char*)0x800, 0x00,120);  /* simple clear screen - 0x00 is the background color */
    
    for (;;)
    { 
    
	for (xx=0;xx<150;xx+=25) 
    { 
    
	//d = rand() % 63; // random color offset
	d = SYS_Random() & 63; // random color offset
	// Instead of "SYS_Random() % 63", try "SYS_Random() & 63" to avoid importing the division code.
	
    for (i=0;i<SIZE;i++)
    {   
        unsigned char digit = arecibo[i];
                
        for (j=0; j<8; j++) 
        {
        	xpos = xx+x+j;
         	if ((digit & 128) == 128) drawPixel(xpos,y,d+1);
         	else drawPixel(xpos,y,d);        	
        	digit = digit << 1;
        }
        x += 8;
        if (x > 23) {
            x = 0;
            y++;
        } 
    }
    y=0;
    }
    }
}

